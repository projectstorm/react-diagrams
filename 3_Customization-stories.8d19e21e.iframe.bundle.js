"use strict";(self.webpackChunk_projectstorm_react_diagrams_gallery=self.webpackChunk_projectstorm_react_diagrams_gallery||[]).push([[171],{"../node_modules/.pnpm/@storybook+addon-actions@7.4.4_@types+react-dom@18.2.7_@types+react@18.2.22_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_AY7I2SME.aD});var chunk_AY7I2SME=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@7.4.4_@types+react-dom@18.2.7_@types+react@18.2.22_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs")},"./demos/3_Customization.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomAnimatedLinks:()=>CustomAnimatedLinks,CustomDiamondNode:()=>CustomDiamondNode,CustomEvent:()=>CustomEvent,CustomLinkEndsWithArrows:()=>CustomLinkEndsWithArrows,CustomLinkLabel:()=>CustomLinkLabel,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_3_Customization_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),react_diagrams_dist=__webpack_require__("../packages/react-diagrams/dist/index.js"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx");class EditableLabelModel extends react_diagrams_dist.aS{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({...options,type:"editable-label"}),this.value=options.value||""}serialize(){return{...super.serialize(),value:this.value}}deserialize(event){super.deserialize(event),this.value=event.data.value}}var emotion_styled_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.11.0_@emotion+react@11.11.1_@types+react@18.2.22_react@18.2.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),addon_actions_dist=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@7.4.4_@types+react-dom@18.2.7_@types+react@18.2.22_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-actions/dist/index.mjs"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");let S;(S||(S={})).Label=emotion_styled_browser_esm.Z.div`
		user-select: none;
		pointer-events: auto;
	`;const EditableLabelWidget=props=>{const[str,setStr]=react.useState(props.model.value);return(0,jsx_runtime.jsxs)(S.Label,{children:[(0,jsx_runtime.jsx)("input",{value:str,onChange:event=>{const newVal=event.target.value;setStr(newVal),props.model.value=newVal}}),(0,jsx_runtime.jsx)("button",{onClick:()=>(0,addon_actions_dist.aD)("model eventDidFire")("You clicked the button"),children:"Click me!"})]})};EditableLabelWidget.displayName="EditableLabelWidget";class EditableLabelFactory extends dist.a3{constructor(){super("editable-label")}generateModel(){return new EditableLabelModel}generateReactWidget(event){return(0,jsx_runtime.jsx)(EditableLabelWidget,{model:event.model})}}var forEach=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/forEach.js"),forEach_default=__webpack_require__.n(forEach);class CustomDeleteItemsAction extends dist.aU{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};options={keyCodes:[46,8],...options},super({type:dist.n$.KEY_DOWN,fire:event=>{if(-1!==options.keyCodes.indexOf(event.event.keyCode)){const selectedEntities=this.engine.getModel().getSelectedEntities();if(selectedEntities.length>0){window.confirm("Are you sure you want to delete?")&&(forEach_default()(selectedEntities,(model=>{model.isLocked()||model.remove()})),this.engine.repaintCanvas())}}}})}}class DiamondPortModel extends react_diagrams_dist.AJ{constructor(alignment){super({type:"diamond",name:alignment,alignment})}createLinkModel(){return new react_diagrams_dist.Si}}class DiamondNodeModel extends react_diagrams_dist.XF{constructor(){super({type:"diamond"}),this.addPort(new DiamondPortModel(react_diagrams_dist.tK.TOP)),this.addPort(new DiamondPortModel(react_diagrams_dist.tK.LEFT)),this.addPort(new DiamondPortModel(react_diagrams_dist.tK.BOTTOM)),this.addPort(new DiamondPortModel(react_diagrams_dist.tK.RIGHT))}}let DiamondNodeWidget_S;!function(_S){_S.Port=emotion_styled_browser_esm.Z.div`
		width: 16px;
		height: 16px;
		z-index: 10;
		background: rgba(0, 0, 0, 0.5);
		border-radius: 8px;
		cursor: pointer;

		&:hover {
			background: rgba(0, 0, 0, 1);
		}
	`}(DiamondNodeWidget_S||(DiamondNodeWidget_S={}));class DiamondNodeWidget extends react.Component{render(){return(0,jsx_runtime.jsxs)("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size},children:[(0,jsx_runtime.jsx)("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:`\n          <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n            <polygon fill="mediumpurple" stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="3" stroke-miterlimit="10" points="10,`+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>\n        '}}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{top:this.props.size/2-8,left:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.LEFT),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{left:this.props.size/2-8,top:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.TOP),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{left:this.props.size-8,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.RIGHT),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})}),(0,jsx_runtime.jsx)(react_diagrams_dist.ER,{style:{left:this.props.size/2-8,top:this.props.size-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.tK.BOTTOM),engine:this.props.engine,children:(0,jsx_runtime.jsx)(DiamondNodeWidget_S.Port,{})})]})}}DiamondNodeWidget.displayName="DiamondNodeWidget";class DiamondNodeFactory extends dist.a3{constructor(){super("diamond")}generateReactWidget(event){return(0,jsx_runtime.jsx)(DiamondNodeWidget,{engine:this.engine,size:50,node:event.model})}generateModel(event){return new DiamondNodeModel}}class SimplePortFactory extends dist.Zi{constructor(type,cb){super(type),this.cb=cb}generateModel(event){return this.cb(event.initialConfig)}}class AdvancedLinkModel extends react_diagrams_dist.Si{constructor(){super({type:"advanced",width:10})}}class AdvancedPortModel extends react_diagrams_dist.Gi{createLinkModel(){return new AdvancedLinkModel}}class AdvancedLinkSegment extends react.Component{constructor(props){super(props),this.percent=0}componentDidMount(){this.mounted=!0,this.callback=()=>{if(!this.circle||!this.path)return;this.percent+=2,this.percent>100&&(this.percent=0);let point=this.path.getPointAtLength(this.path.getTotalLength()*(this.percent/100));this.circle.setAttribute("cx",""+point.x),this.circle.setAttribute("cy",""+point.y),this.mounted&&requestAnimationFrame(this.callback)},requestAnimationFrame(this.callback)}componentWillUnmount(){this.mounted=!1}render(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("path",{fill:"none",ref:ref=>{this.path=ref},strokeWidth:this.props.model.getOptions().width,stroke:"rgba(255,0,0,0.5)",d:this.props.path}),(0,jsx_runtime.jsx)("circle",{ref:ref=>{this.circle=ref},r:10,fill:"orange"})]})}}AdvancedLinkSegment.displayName="AdvancedLinkSegment";class AdvancedLinkFactory extends react_diagrams_dist.oQ{constructor(){super("advanced")}generateModel(){return new AdvancedLinkModel}generateLinkSegment(model,selected,path){return(0,jsx_runtime.jsx)("g",{children:(0,jsx_runtime.jsx)(AdvancedLinkSegment,{model,path})})}}var react_diagrams_core_dist=__webpack_require__("../packages/react-diagrams-core/dist/index.js"),react_diagrams_defaults_dist=__webpack_require__("../packages/react-diagrams-defaults/dist/index.js");class demo_custom_link2_AdvancedLinkModel extends react_diagrams_dist.Si{constructor(){super({type:"advanced",width:4})}}class demo_custom_link2_AdvancedPortModel extends react_diagrams_dist.Gi{createLinkModel(){return new demo_custom_link2_AdvancedLinkModel}}const CustomLinkArrowWidget=props=>{const{point,previousPoint}=props,angle=90+180*Math.atan2(point.getPosition().y-previousPoint.getPosition().y,point.getPosition().x-previousPoint.getPosition().x)/Math.PI;return(0,jsx_runtime.jsx)("g",{className:"arrow",transform:"translate("+point.getPosition().x+", "+point.getPosition().y+")",children:(0,jsx_runtime.jsx)("g",{style:{transform:"rotate("+angle+"deg)"},children:(0,jsx_runtime.jsx)("g",{transform:"translate(0, -3)",children:(0,jsx_runtime.jsx)("polygon",{points:"0,10 8,30 -8,30",fill:props.color,"data-id":point.getID(),"data-linkid":point.getLink().getID()})})})})};CustomLinkArrowWidget.displayName="CustomLinkArrowWidget";class AdvancedLinkWidget extends react.Component{generatePoint=point=>(0,jsx_runtime.jsx)(react_diagrams_defaults_dist.hb,{point,colorSelected:this.props.link.getOptions().selectedColor??"",color:this.props.link.getOptions().color},point.getID());generateLink=(path,extraProps,id)=>(0,jsx_runtime.jsx)(react_diagrams_defaults_dist.AQ,{path,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,extras:extraProps},`link-${id}`);addPointToLink=(event,index)=>{if(!event.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){const position=this.props.diagramEngine.getRelativeMousePoint(event),point=this.props.link.point(position.x,position.y,index);event.persist(),event.stopPropagation(),this.props.diagramEngine.getActionEventBus().fireAction({event,model:point})}};generateArrow(point,previousPoint){return(0,jsx_runtime.jsx)(CustomLinkArrowWidget,{point,previousPoint,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color},point.getID())}render(){var points=this.props.link.getPoints(),paths=[];for(let j=0;j<points.length-1;j++)paths.push(this.generateLink(react_diagrams_core_dist.hL.generateLinePath(points[j],points[j+1]),{"data-linkid":this.props.link.getID(),"data-point":j,onMouseDown:event=>{this.addPointToLink(event,j+1)}},j));for(let i=1;i<points.length-1;i++)paths.push(this.generatePoint(points[i]));return null!==this.props.link.getTargetPort()?paths.push(this.generateArrow(points[points.length-1],points[points.length-2])):paths.push(this.generatePoint(points[points.length-1])),(0,jsx_runtime.jsx)("g",{"data-default-link-test":this.props.link.getOptions().testName,children:paths})}}AdvancedLinkWidget.displayName="AdvancedLinkWidget";class demo_custom_link2_AdvancedLinkFactory extends react_diagrams_dist.oQ{constructor(){super("advanced")}generateModel(){return new demo_custom_link2_AdvancedLinkModel}generateReactWidget(event){return(0,jsx_runtime.jsx)(AdvancedLinkWidget,{link:event.model,diagramEngine:this.engine})}}dist.C7.TESTING=!0;const _3_Customization_stories={title:"Customization"},CustomDiamondNode=()=>{var engine=(0,react_diagrams_dist.ZP)();engine.getPortFactories().registerFactory(new SimplePortFactory("diamond",(config=>new DiamondPortModel(react_diagrams_dist.tK.LEFT)))),engine.getNodeFactories().registerFactory(new DiamondNodeFactory);var model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,200);var node2=new DiamondNodeModel;node2.setPosition(250,108);var node3=new react_diagrams_dist.Fs("Node 3","red"),port3=node3.addInPort("In");node3.setPosition(500,100);var link1=port1.link(node2.getPort(react_diagrams_dist.tK.LEFT)),link2=port3.link(node2.getPort(react_diagrams_dist.tK.RIGHT)),node4=new react_diagrams_dist.Fs("Node 4","rgb(0,192,255)"),port4=node4.addOutPort("Out");node4.setPosition(200,10);var link3=port4.link(node2.getPort(react_diagrams_dist.tK.TOP)),node5=new react_diagrams_dist.Fs("Node 5","mediumpurple"),port5=node5.addInPort("In");node5.setPosition(400,300);var link4=port5.link(node2.getPort(react_diagrams_dist.tK.BOTTOM));return model.addAll(node1,node2,node3,link1,link2,node4,link3,link4,node5),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomAnimatedLinks=()=>{var engine=(0,react_diagrams_dist.ZP)();engine.getLinkFactories().registerFactory(new AdvancedLinkFactory);var node1=new react_diagrams_dist.Fs("Source","rgb(0,192,255)");let port1=node1.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),port2=node1.addPort(new react_diagrams_dist.Gi(!1,"out-2","Out default"));node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Target","rgb(192,255,0)"),port3=node2.addPort(new AdvancedPortModel(!0,"in-1","In thick")),port4=node2.addPort(new react_diagrams_dist.Gi(!0,"in-2","In default"));node2.setPosition(300,100);var node3=new react_diagrams_dist.Fs("Source","rgb(0,192,255)");node3.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),node3.addPort(new react_diagrams_dist.Gi(!1,"out-2","Out default")),node3.setPosition(100,200);var node4=new react_diagrams_dist.Fs("Target","rgb(192,255,0)");node4.addPort(new AdvancedPortModel(!0,"in-1","In thick")),node4.addPort(new react_diagrams_dist.Gi(!0,"in-2","In default")),node4.setPosition(300,200);var model=new react_diagrams_dist.Vm;return model.addAll(port1.link(port3),port2.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomLinkEndsWithArrows=()=>{var engine=(0,react_diagrams_dist.ZP)();engine.getLinkFactories().registerFactory(new demo_custom_link2_AdvancedLinkFactory);var node1=new react_diagrams_dist.Fs("Source","rgb(0,192,255)");let port1=node1.addPort(new demo_custom_link2_AdvancedPortModel(!1,"out"));node1.setPosition(100,100);var node2=new react_diagrams_dist.Fs("Target","rgb(192,255,0)"),port2=node2.addPort(new demo_custom_link2_AdvancedPortModel(!0,"in"));node2.setPosition(500,350);var node3=new react_diagrams_dist.Fs("Source","rgb(0,192,255)");let port3=node3.addPort(new demo_custom_link2_AdvancedPortModel(!1,"out"));node3.setPosition(100,500);var node4=new react_diagrams_dist.Fs("Target","rgb(192,255,0)"),port4=node4.addPort(new demo_custom_link2_AdvancedPortModel(!0,"in"));node4.setPosition(500,450);var model=new react_diagrams_dist.Vm;return model.addAll(port1.link(port2),port3.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomLinkLabel=()=>{const engine=(0,react_diagrams_dist.ZP)();engine.getLabelFactories().registerFactory(new EditableLabelFactory);const model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs("Node1","red"),port1=node1.addOutPort("out");node1.setPosition(250,100);const node2=new react_diagrams_dist.Fs("Node2","green"),port2=node2.addInPort("in");node2.setPosition(800,300);const link1=port1.link(port2);return link1.addLabel(new EditableLabelModel({value:"Hello, I am label!"})),model.addAll(node1,port1,node2,port2,link1),engine.setModel(model),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},CustomEvent=()=>{const engine=(0,react_diagrams_dist.ZP)({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_dist.Vm,node1=new react_diagrams_dist.Fs({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);const port1=node1.addOutPort("Out"),node2=new react_diagrams_dist.Fs("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);const link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new CustomDeleteItemsAction),(0,jsx_runtime.jsx)(DemoCanvasWidget._,{children:(0,jsx_runtime.jsx)(dist.JE,{engine})})},__namedExportsOrder=["CustomDiamondNode","CustomAnimatedLinks","CustomLinkEndsWithArrows","CustomLinkLabel","CustomEvent"]}}]);
//# sourceMappingURL=3_Customization-stories.8d19e21e.iframe.bundle.js.map